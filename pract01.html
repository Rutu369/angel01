# Question: Write a Python code to reduce a matrix to Echelon Form

def REF_and_rank(A):
    A = [row[:] for row in A]     # make a copy
    n, m = len(A), len(A[0])
    rank = 0

    for i in range(n):
        # if pivot is zero, try to swap with a lower row
        if A[i][i] == 0:
            for j in range(i + 1, n):
                if A[j][i] != 0:
                    A[i], A[j] = A[j], A[i]
                    break

        # if still zero, skip this column
        if A[i][i] == 0:
            continue

        # eliminate entries below the pivot
        for j in range(i + 1, n):
            factor = A[j][i] / A[i][i]
            for k in range(i, m):
                A[j][k] -= factor * A[i][k]

        rank += 1

    return A, rank


A = [
    [1, -1, 2, 3],
    [4,  1, 0, 2],
    [0,  3, 1, 4],
    [0,  1, 9, 2],
]

ref, rank = REF_and_rank(A)
print("Row Echelon Form :")
for row in ref:
    print([round(x, 2) for x in row])

print("\n Rank of matrix = ", rank)